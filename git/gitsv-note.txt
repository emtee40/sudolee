
1, git online book:
	http://git-scm.com/book/zh/

2, add host for git server:
	useradd -m -g users -d /new/home/path -s /bin/bash gitsv
	passwd gitsv

3, login as new user.
	ssh gitsv@127.0.0.1

4, set env:
	echo 'PATH=${PATH}:~/bin' >> ~/.bashrc
	source ~/.bashrc
	mkdir -p ~/bin

5, gitolite:
	[1] get gitolite:
		git clone git://github.com/sitaramc/gitolite

	[2] install gitolite:
		mkdir -p ~/bin
		gitolite/install -ln ~/bin

	[3] genarate ssh key (on your local workstation):
		cd ~/.ssh
		ssh-keygen -t rsa -C "your@email.com"
		scp id_rsa.pub gitsv@127.0.0.1:~/YourName.pub
	
	[4]  setup the initial repos with your key:
		gitolite setup -pk ~/YourName.pub

	[5] clone the admin repo so you can start adding stuff (on your local workstation):
		git clone gitsv@127.0.0.1:gitolite-admin.git

		[note]: If everything okay, there is no password needed.

6, apache:
	[1] install apache:
		pacman -S --needed apache

	[2] configure apache:
		/etc/httpd/conf/httpd.conf
		set : User as "gitsv", Group as "http".

	[3] start httpd:
		systemctl start httpd.service

7, gitweb:
	[1] link to dest:
		ln -s /usr/share/gitweb/ /srv/http/gitweb

	[2] set /etc/gitweb.conf as below:
		$git_temp = "/tmp";
		$projectroot = "/home/gitsv/repositories/open";
		our @git_base_url_list = qw(gitsv@127.0.0.1:open);
		$site_name = "matti's git trees.";
		# enable pretty URLs
		$feature{'pathinfo'}{'default'} = [1];

		$feature{'blame'}{'default'} = [1];
		# enable snapshot downloads
		$feature{'snapshot'}{'default'} = ['zip', 'tgz'];
		# enable syntax highlighting
		$feature{'highlight'}{'default'} = [1];

	[3] note:
		- Don't set $projectroot as the root dir for safe.
		- gitweb repo description in:
			/home/gitsv/repositories/open/github.git/description
		- gitweb repo owner in:
			/home/gitsv/repositories/open/github.git/config
				[gitweb]
					owner = "Matti Lee"

8, set httpd virtual host:
	- uncommit "Include conf/extra/httpd-vhosts.conf" in /etc/http/conf/httpd.conf
	- add virtual host in conf/extra/httpd-vhosts.conf:

		<VirtualHost *:80>
			ServerName gitserver
			DocumentRoot /srv/http/gitweb
			<Directory /srv/http/gitweb>
				Options ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch
				AllowOverride All
				order allow,deny
				Allow from all

				AddHandler cgi-script cgi
				DirectoryIndex gitweb.cgi

				# this 4 lines for nice RULs
				RewriteEngine On
				RewriteCond %{REQUEST_FILENAME} !-f
				RewriteCond %{REQUEST_FILENAME} !-d
				RewriteRule ^.* /gitweb.cgi/$0 [L,PT]

			</Directory>
		</VirtualHost>
